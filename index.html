<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SYNTHETIX AI | Ultra-Pro Editor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            dark: '#0a0a0a',
                            surface: '#121212',
                            primary: '#ffffff', // Estilo Mocha/Base44 usa muito P&B com acentos
                            accent: '#7c3aed',
                            border: 'rgba(255,255,255,0.06)'
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        display: ['Space Grotesk', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <style>
        body { background-color: #0a0a0a; color: #ededed; -webkit-font-smoothing: antialiased; }
        
        /* SIDEBAR CHAT STYLE (BASE44) */
        .chat-bubble-ai { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.08); border-radius: 12px 12px 12px 2px; }
        .chat-bubble-user { background: #7c3aed; color: white; border-radius: 12px 12px 2px 12px; }

        /* SCROLLBAR MINIMALISTA */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-thumb { background: #222; border-radius: 10px; }

        /* ANIMATIONS */
        .fade-in { animation: fadeIn 0.3s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }

        /* IFRAME CONTAINER */
        .preview-container { background: #ffffff; border-radius: 8px; overflow: hidden; box-shadow: 0 20px 50px rgba(0,0,0,0.5); }
        
        /* PULSE LOADING */
        .shimmer { background: linear-gradient(90deg, #121212 25%, #1a1a1a 50%, #121212 75%); background-size: 200% 100%; animation: shimmer 1.5s infinite; }
        @keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }
    </style>
</head>
<body class="flex flex-col h-screen overflow-hidden font-sans">

    <header class="h-14 border-b border-brand-border flex items-center justify-between px-6 bg-brand-dark z-50">
        <div class="flex items-center gap-4">
            <div class="w-6 h-6 bg-white rounded flex items-center justify-center" onclick="navigateTo('home')">
                <div class="w-2 h-2 bg-black rotate-45"></div>
            </div>
            <span class="text-xs font-bold tracking-widest uppercase opacity-50">Synthetix <span class="text-brand-accent">Engine v2</span></span>
        </div>
        
        <div class="flex items-center gap-6">
            <nav class="hidden md:flex items-center gap-6 text-[10px] font-bold uppercase tracking-widest opacity-60">
                <button onclick="navigateTo('home')" class="hover:text-white transition">Home</button>
                <button onclick="navigateTo('showcase')" class="hover:text-white transition">Showcase</button>
                <button onclick="navigateTo('pricing')" class="hover:text-white transition">Pricing</button>
            </nav>
            <div class="h-4 w-px bg-brand-border"></div>
            <div id="auth-section">
                </div>
            <button onclick="toggleMobileMenu()" class="md:hidden text-white"><i class="fas fa-bars"></i></button>
        </div>
    </header>

    <main id="main-content" class="flex-1 flex overflow-hidden relative">

        <section id="view-app" class="flex-1 flex flex-col md:flex-row h-full">
            <aside class="w-full md:w-[380px] flex flex-col border-r border-brand-border bg-brand-dark relative">
                <div class="p-4 border-b border-brand-border flex justify-between items-center">
                    <span class="text-[10px] font-bold opacity-40 uppercase tracking-widest">Assistant context</span>
                    <button onclick="clearEditor()" class="text-[9px] hover:text-red-500 transition">RESET</button>
                </div>
                
                <div id="chat-history" class="flex-1 overflow-y-auto p-4 space-y-6 pb-24">
                    <div class="chat-bubble-ai p-4 text-xs leading-relaxed text-gray-400 fade-in">
                        Esta√ß√£o pronta. Qual componente ou interface vamos arquitetar agora?
                    </div>
                </div>

                <div class="p-4 bg-brand-dark/80 backdrop-blur-md absolute bottom-0 w-full">
                    <div class="relative group">
                        <textarea id="userPrompt" rows="1" class="w-full bg-brand-surface border border-brand-border rounded-xl py-4 pl-4 pr-12 text-sm text-white focus:border-brand-accent outline-none transition-all resize-none shadow-2xl" placeholder="Ex: Crie um Hero Section bento grid..."></textarea>
                        <button onclick="generateSite()" class="absolute right-3 bottom-3.5 w-8 h-8 bg-white text-black rounded-lg flex items-center justify-center hover:bg-brand-accent hover:text-white transition-all shadow-lg">
                            <i class="fas fa-arrow-up text-xs"></i>
                        </button>
                    </div>
                </div>
            </aside>

            <div class="flex-1 bg-[#050505] p-4 md:p-8 flex flex-col">
                <div class="flex items-center justify-between mb-4">
                    <div class="flex gap-1.5">
                        <div class="w-2.5 h-2.5 rounded-full bg-red-500/20"></div>
                        <div class="w-2.5 h-2.5 rounded-full bg-yellow-500/20"></div>
                        <div class="w-2.5 h-2.5 rounded-full bg-green-500/20"></div>
                    </div>
                    <button onclick="postSite()" class="bg-white text-black text-[10px] font-bold px-4 py-1.5 rounded-full hover:bg-brand-accent hover:text-white transition-all uppercase tracking-widest shadow-xl">Deploy Site</button>
                </div>

                <div class="flex-1 preview-container relative">
                    <div id="loadingState" class="hidden absolute inset-0 z-50 flex flex-col items-center justify-center bg-brand-dark/95">
                        <div class="w-12 h-12 border-2 border-white/10 border-t-white rounded-full animate-spin mb-4"></div>
                        <span class="text-[10px] font-mono tracking-[0.4em] uppercase opacity-40">Compiling Components</span>
                    </div>
                    <div id="emptyState" class="absolute inset-0 flex items-center justify-center text-[10px] font-mono uppercase tracking-[0.5em] opacity-10">Awaiting Input</div>
                    <iframe id="siteFrame" class="w-full h-full border-0 hidden bg-white"></iframe>
                </div>
            </div>
        </section>

        <section id="view-home" class="hidden flex-1 flex flex-col items-center justify-center text-center px-6">
            <h1 class="font-display text-6xl md:text-9xl font-bold tracking-tighter mb-6">SYNTHETIX<br><span class="text-brand-accent">AI</span></h1>
            <p class="text-gray-500 max-w-lg mb-12 text-sm md:text-base leading-relaxed">A ferramenta definitiva para criar sites profissionais via chat. Tecnologia Base44 para a marca Zenith.</p>
            <div class="flex gap-4">
                <button onclick="navigateTo('app')" class="bg-white text-black px-8 py-4 rounded-full font-bold text-sm hover:scale-105 transition-all">Come√ßar Agora</button>
                <button onclick="navigateTo('pricing')" class="border border-white/10 px-8 py-4 rounded-full font-bold text-sm hover:bg-white/5 transition-all">Ver Planos</button>
            </div>
        </section>

        <section id="view-pricing" class="hidden flex-1 overflow-y-auto py-20 px-6">
            <div class="max-w-4xl mx-auto text-center">
                <h2 class="text-4xl font-display font-bold mb-12">Assinaturas</h2>
                <div class="grid md:grid-cols-2 gap-8">
                    <div class="glass p-10 rounded-3xl text-left border-brand-border">
                        <h3 class="text-xl font-bold mb-4">Initiate</h3>
                        <p class="text-4xl font-bold mb-8">R$ 29,90<span class="text-xs opacity-40">/m√™s</span></p>
                        <a href="https://mpago.la/1V3fYRm" target="_blank" class="block w-full py-4 bg-white/5 border border-white/10 rounded-xl text-center font-bold hover:bg-white/10 transition">Assinar</a>
                    </div>
                    <div class="glass p-10 rounded-3xl text-left border-brand-accent bg-brand-accent/5">
                        <h3 class="text-xl font-bold mb-4">Architect PRO</h3>
                        <p class="text-4xl font-bold mb-8">R$ 49,90<span class="text-xs opacity-40">/m√™s</span></p>
                        <a href="https://mpago.la/1m8A4zt" target="_blank" class="block w-full py-4 bg-brand-accent text-white rounded-xl text-center font-bold hover:bg-brand-hover transition">Assinar Pro</a>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <script>
        // CONFIGURA√á√ïES E ESTADO
        let currentCode = ""; 
        let isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
        let userName = localStorage.getItem('userName') || "Usu√°rio";
        let projects = JSON.parse(localStorage.getItem('projects')) || [];

        window.onload = () => {
            updateNav();
            navigateTo('home');
        };

        // NAVEGA√á√ÉO
        function navigateTo(viewId) {
            document.querySelectorAll('section[id^="view-"]').forEach(el => el.classList.add('hidden'));
            document.getElementById('view-' + viewId).classList.remove('hidden');
        }

        // EDITOR IA (A M√ÅGICA LADO A LADO)
        async function generateSite() {
            const input = document.getElementById('userPrompt');
            const history = document.getElementById('chat-history');
            const prompt = input.value.trim();
            if(!prompt) return;

            // 1. UI: Mensagem do Usu√°rio
            const uMsg = document.createElement('div');
            uMsg.className = "chat-bubble-user p-4 text-xs ml-8 fade-in shadow-xl";
            uMsg.innerText = prompt;
            history.appendChild(uMsg);
            input.value = "";
            history.scrollTop = history.scrollHeight;

            // 2. UI: Loading
            const loading = document.getElementById('loadingState');
            const frame = document.getElementById('siteFrame');
            loading.classList.remove('hidden');

            try {
                const response = await fetch('/api/generate', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ prompt, existingCode: currentCode })
                });
                const data = await response.json();
                
                if (data.html) {
                    currentCode = data.html;
                    const doc = frame.contentWindow.document;
                    doc.open(); doc.write(currentCode); doc.close();
                    
                    document.getElementById('emptyState').classList.add('hidden');
                    frame.classList.remove('hidden');

                    // 3. UI: Confirma√ß√£o da IA com Dica Interativa
                    const aiMsg = document.createElement('div');
                    aiMsg.className = "chat-bubble-ai p-4 text-xs mr-8 fade-in";
                    aiMsg.innerHTML = `<strong>Synthetix:</strong> Projeto atualizado. <br><br> <span class="opacity-50">üí° Dica: Este layout bento grid melhora a legibilidade mobile.</span>`;
                    history.appendChild(aiMsg);
                }
            } catch (e) {
                showToast("Erro na compila√ß√£o");
            } finally {
                loading.classList.add('hidden');
                history.scrollTop = history.scrollHeight;
            }
        }

        // DEPLOY (PUBLICA√á√ÉO)
        function postSite() {
            if(!currentCode) { showToast("Crie algo primeiro"); return; }
            showToast("Iniciando Deploy...");
            const loading = document.getElementById('loadingState');
            loading.classList.remove('hidden');

            setTimeout(() => {
                loading.classList.add('hidden');
                const url = "https://synthetix.ai/live/" + Math.random().toString(36).substring(7);
                const history = document.getElementById('chat-history');
                const deployMsg = document.createElement('div');
                deployMsg.className = "bg-green-500/10 border border-green-500/20 p-4 rounded-xl text-[10px] text-green-400 font-mono fade-in";
                deployMsg.innerHTML = `STATUS: DEPLOYED<br>URL: <a href="#" class="underline">${url}</a>`;
                history.appendChild(deployMsg);
                history.scrollTop = history.scrollHeight;
                showToast("Site Publicado!");
            }, 2500);
        }

        function clearEditor() {
            currentCode = "";
            document.getElementById('siteFrame').classList.add('hidden');
            document.getElementById('emptyState').classList.remove('hidden');
            document.getElementById('chat-history').innerHTML = `<div class="chat-bubble-ai p-4 text-xs opacity-50 italic">Esta√ß√£o resetada.</div>`;
            showToast("Editor Limpo");
        }

        function updateNav() {
            const auth = document.getElementById('auth-section');
            if(isLoggedIn) {
                auth.innerHTML = `<button onclick="navigateTo('profile')" class="text-[10px] font-bold uppercase tracking-widest">${userName}</button>`;
            } else {
                auth.innerHTML = `<button onclick="navigateTo('auth')" class="text-[10px] font-bold uppercase tracking-widest">Login</button>`;
            }
        }

        function showToast(m) {
            const t = document.createElement('div');
            t.className = "fixed bottom-6 right-6 bg-white text-black px-6 py-3 rounded-full text-[10px] font-bold uppercase tracking-widest shadow-2xl z-[300] fade-in";
            t.innerText = m;
            document.body.appendChild(t);
            setTimeout(() => t.remove(), 3000);
        }

        function logout() { localStorage.clear(); location.reload(); }
    </script>
</body>
</html>
